# Реалізація інформаційного та програмного забезпечення

В рамках проєкту розробляється:
## SQL-скрипт для створення на початкового наповнення бази даних

```sql
-- MySQL Script generated by MySQL Workbench
-- Mon Apr 29 21:15:10 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema DB-lab-IO-26
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DB-lab-IO-26
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DB-lab-IO-26` DEFAULT CHARACTER SET utf8 ;
USE `DB-lab-IO-26` ;

-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`permissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`permissions` (
  `Id` INT NOT NULL,
  `Permission` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`projects`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`projects` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(50) NOT NULL,
  `Description` VARCHAR(100) NOT NULL,
  `Status` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`payments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`payments` (
  `Id` INT NOT NULL,
  `CardNumber` INT NOT NULL,
  `CardCVV` INT NOT NULL,
  `CardExpireDate` DATETIME NOT NULL,
  `Email` VARCHAR(50) NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_payments_projects_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_payments_projects`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`reles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`reles` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(30) NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`role_grant`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`role_grant` (
  `RoleID` INT NOT NULL,
  `PermissionId` INT NOT NULL,
  INDEX `fk_role_grant_reles1_idx` (`RoleID` ASC) VISIBLE,
  INDEX `fk_role_grant_permissions1_idx` (`PermissionId` ASC) VISIBLE,
  CONSTRAINT `fk_role_grant_reles1`
    FOREIGN KEY (`RoleID`)
    REFERENCES `DB-lab-IO-26`.`reles` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_role_grant_permissions1`
    FOREIGN KEY (`PermissionId`)
    REFERENCES `DB-lab-IO-26`.`permissions` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`reviews`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`reviews` (
  `Id` INT NOT NULL,
  `Text` VARCHAR(100) NOT NULL,
  `Rate` INT NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_reviews_projects1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_reviews_projects1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`tasks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`tasks` (
  `Id` INT NOT NULL,
  `Name` VARCHAR(50) NOT NULL,
  `Developer` VARCHAR(45) NOT NULL,
  `Status` VARCHAR(20) NOT NULL,
  `Deadline` DATETIME NOT NULL,
  `ProjectId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_tasks_projects1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_tasks_projects1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`users` (
  `Id` INT NOT NULL,
  `Login` VARCHAR(45) NOT NULL,
  `Picture` MEDIUMBLOB NOT NULL,
  `Password` BLOB NOT NULL,
  `Email` VARCHAR(50) NOT NULL,
  `Role` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`members` (
  `Id` INT NOT NULL,
  `RoleId` INT NOT NULL,
  `UserId` INT NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `fk_members_users1_idx` (`RoleId` ASC) VISIBLE,
  INDEX `fk_members_reles1_idx` (`UserId` ASC) VISIBLE,
  CONSTRAINT `fk_members_users1`
    FOREIGN KEY (`RoleId`)
    REFERENCES `DB-lab-IO-26`.`users` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_members_reles1`
    FOREIGN KEY (`UserId`)
    REFERENCES `DB-lab-IO-26`.`reles` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB-lab-IO-26`.`projects_members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB-lab-IO-26`.`projects_members` (
  `MemberID` INT NOT NULL,
  `ProjectId` INT NOT NULL,
  INDEX `fk_projects_members_projects1_idx` (`MemberID` ASC) VISIBLE,
  INDEX `fk_projects_members_members1_idx` (`ProjectId` ASC) VISIBLE,
  CONSTRAINT `fk_projects_members_projects1`
    FOREIGN KEY (`MemberID`)
    REFERENCES `DB-lab-IO-26`.`projects` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_projects_members_members1`
    FOREIGN KEY (`ProjectId`)
    REFERENCES `DB-lab-IO-26`.`members` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`permissions`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (1, 'Read');
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (2, 'Write');
INSERT INTO `DB-lab-IO-26`.`permissions` (`Id`, `Permission`) VALUES (3, 'Execute');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`projects`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (1, 'Project A', 'Description for Project A', 'Active');
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (2, 'Project B', 'Description for Project B', 'Inactive');
INSERT INTO `DB-lab-IO-26`.`projects` (`Id`, `Name`, `Description`, `Status`) VALUES (3, 'Project C', 'Description for Project C', 'Pending');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`payments`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (1, 123456, 123, '2024-04-26', 'payment1@example.com', 1);
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (2, 112233, 456, '2024-04-27', 'payment2@example.com', 2);
INSERT INTO `DB-lab-IO-26`.`payments` (`Id`, `CardNumber`, `CardCVV`, `CardExpireDate`, `Email`, `ProjectId`) VALUES (3, 123424, 789, '2024-04-29', 'payment3@example.com', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`reles`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (1, 'Teamlead');
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (2, 'Developer');
INSERT INTO `DB-lab-IO-26`.`reles` (`Id`, `Name`) VALUES (3, 'Admin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`role_grant`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (1, 1);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (1, 2);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (2, 1);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (2, 3);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (3, 2);
INSERT INTO `DB-lab-IO-26`.`role_grant` (`RoleID`, `PermissionId`) VALUES (3, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`reviews`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (1, 'Good project!', 5, 1);
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (2, 'Could be better', 3, 2);
INSERT INTO `DB-lab-IO-26`.`reviews` (`Id`, `Text`, `Rate`, `ProjectId`) VALUES (3, 'Excellent work', 5, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`tasks`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (1, 'Task 1', 'dev_user1', 'In Progress', '2024-04-25', 1);
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (2, 'Task 2', 'dev_user2', 'To Do', '2024-04-28', 2);
INSERT INTO `DB-lab-IO-26`.`tasks` (`Id`, `Name`, `Developer`, `Status`, `Deadline`, `ProjectId`) VALUES (3, 'Task 3', 'dev_user3', 'Completed', '2024-04-29', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`users`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (1, 'admin_user', admin_picture_blob, admin_password_blob, 'admin@example.com', 'Teamlead');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (2, 'dev_user1', dev_picture_blob1, dev_password_blob1, 'dev1@example.com', 'Developer');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (3, 'dev_user2', dev_picture_blob2, dev_password_blob2, 'dev2@example.com', 'Developer');
INSERT INTO `DB-lab-IO-26`.`users` (`Id`, `Login`, `Picture`, `Password`, `Email`, `Role`) VALUES (4, 'manager_user', manager_picture_blob, manager_password_blob, 'manager@example.com', 'Admin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`members`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (1, 1, 1);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (2, 2, 2);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (3, 2, 3);
INSERT INTO `DB-lab-IO-26`.`members` (`Id`, `RoleId`, `UserId`) VALUES (4, 3, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB-lab-IO-26`.`projects_members`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB-lab-IO-26`;
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (1, 1);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (2, 1);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (3, 2);
INSERT INTO `DB-lab-IO-26`.`projects_members` (`MemberID`, `ProjectId`) VALUES (4, 3);

COMMIT;

```

## RESTfull сервіс для управління даними

### Головний файл

```python
from flask import Flask

app = Flask(__name__);
    
from projects_controller import *
from users_controller import *
```

### Projects Controller 

```python
from app import app  # Імпорт екземпляру програми Flask з модуля app
from projects_model import Projects  # Імпорт класу Projects з модуля projects_model
from flask import request  # Імпорт об'єкту request з Flask для роботи з HTTP-запитами

projects = Projects()  # Створення екземпляру класу Projects для роботи з даними проектів

# Маршрут для отримання всіх проектів
@app.route("/projects")
def get_all_projects():
    return projects.get_all_projects()

# Маршрут для отримання проекту за його ідентифікатором
@app.route("/project/<id>")
def get_project_by_id(id):
    return projects.get_project_by_id(id)

# Маршрут для додавання нового проекту
@app.route("/project/add", methods=["POST"])
def add_project():
    return projects.add_project(request.form)

# Маршрут для оновлення проекту
@app.route("/project/update", methods=["PUT"])
def update_project():
    return projects.update_project(request.form)

# Маршрут для видалення проекту за його ідентифікатором
@app.route("/project/delete/<id>", methods=["DELETE"])
def delete_project(id):
    return projects.delete_project(id)

```

### Projects Model

```py
import json  # Імпорт модуля для роботи з JSON
from flask import make_response  # Імпорт функції для створення відповіді Flask
import mysql.connector  # Імпорт модуля для роботи з MySQL

class Projects:
    def __init__(self):
        try:
            # Підключення до бази даних MySQL
            self.con = mysql.connector.connect(host="localhost", user="root", password="db12345!", database='project_db')
            self.cur = self.con.cursor(dictionary=True)  # Створення курсора для роботи з даними у вигляді словника
            self.con.autocommit = True  # Встановлення автоматичного підтвердження для автоматичного збереження змін
            print("succesful connection")  # Виведення повідомлення про успішне з'єднання
        except:
            print("failed")  # Виведення повідомлення про невдале з'єднання

    # Отримання всіх проектів
    def get_all_projects(self):
        self.cur.execute("SELECT * FROM projects")  # Виконання запиту для вибору всіх проектів

        result = self.cur.fetchall()  # Отримання результату запиту

        # Перевірка наявності проектів
        if (self.cur.rowcount == 0):
            result = {"message": "There is no projects", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність проектів

        return result  # Повернення результату

    # Отримання проекту за його ідентифікатором
    def get_project_by_id(self, id):
        if (not str(id).isdigit()):  # Перевірка на правильність формату ідентифікатора
            return {"message": "Invalid project id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор
        self.cur.execute(f"SELECT * FROM projects WHERE id={id}")  # Виконання запиту для вибору проекту за його ідентифікатором

        result = self.cur.fetchall()  # Отримання результату запиту

        # Перевірка наявності проекту
        if (self.cur.rowcount == 0):
            result = {"message": "There is no project with such id", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність проекту

        return result  # Повернення результату

    # Додавання нового проекту
    def add_project(self, data):
        data = dict(data)  # Конвертація даних у словник

        return_value = ""  # Ініціалізація змінної для повернення значення

        if (len(data) == 3):  # Перевірка кількості ключів у словнику
            # Виконання запиту для додавання нового проекту
            self.cur.execute(f"INSERT INTO projects (Name, Description, Status) VALUES ('{data["Name"]}', '{data["Description"]}', '{data["Status"]}')")

            print(self.cur.rowcount)  # Виведення кількості змінених рядків

            # Перевірка успішності виконання запиту
            if (self.cur.rowcount != 0):
                return_value = {"message": "Successfully added to database", "status code": 200}  # Створення повідомлення про успішне додавання проекту
            else:
                return_value = {"message": "Project was not added to database", "error": "Not Acceptable", "status code": 406}  # Створення повідомлення про невдале додавання проекту
        else:
            return_value = {"message": "Invalid amount of keys", "error": "Bad Request", "status code": 400}  # Створення повідомлення про неправильну кількість ключів у словнику

        return return_value  # Повернення результату

    # Видалення проекту за його ідентифікатором
    def delete_project(self, id):
        if (not str(id).isdigit()):  # Перевірка на правильність формату ідентифікатора
            return {"message": "Invalid project id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор

        # Виконання запитів для видалення проекту та пов'язаних з ним даних
        self.cur.execute(f"DELETE FROM projects_members WHERE ProjectId={id}")
        self.cur.execute(f"DELETE FROM tasks WHERE ProjectId={id}")
        self.cur.execute(f"DELETE FROM reviews WHERE ProjectId={id}")
        self.cur.execute(f"DELETE FROM payments WHERE ProjectId={id}")
        self.cur.execute(f"DELETE FROM projects WHERE Id={id}")

        print(self.cur.rowcount)  # Виведення кількості змінених рядків

        # Перевірка успішності виконання запиту
        if (self.cur.rowcount > 0):
            return_value = {"message": "Project was successfully deleted", "status code": 204}  # Створення повідомлення про успішне видалення проекту
        else:
            return_value = {"message": "Nothing to delete", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність проекту для видалення

        return return_value  # Повернення результату

    # Оновлення проекту
    def update_project(self, data):
        data = dict(data)  # Конвертація даних у словник
        return_value = ""  # Ініціалізація змінної для повернення значення

        if (len(data) == 4):  # Перевірка кількості ключів у словнику
            if (not str(data["Id"]).isdigit()):  # Перевірка на правильність формату ідентифікатора
                return {"message": "Invalid project id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор

            # Виконання запиту для оновлення даних проекту
            self.cur.execute(f"UPDATE projects SET Name='{data["Name"]}', Description='{data["Description"]}', Status='{data["Status"]}' WHERE Id={data["Id"]}")

            print(self.cur.rowcount)  # Виведення кількості змінених рядків

            # Перевірка успішності виконання запиту
            if (self.cur.rowcount > 0):
                return_value = {"message": "Updated successfully", "status code": 200}  # Створення повідомлення про успішне оновлення даних проекту
            else:
                return_value = {"message": "Nothing to update", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність проекту для оновлення
        else:
            return_value = {"message": "Invalid amount of keys", "error": "Bad Request", "status code": 400}  # Створення повідомлення про неправильну кількість ключів у словнику

        return return_value  # Повернення результату

```

### Users Controller

```py
from app import app  # Імпорт екземпляру програми Flask з модуля app
from users_model import Users  # Імпорт класу Users з модуля users_model
from flask import request  # Імпорт об'єкту request з Flask для роботи з HTTP-запитами

users = Users()  # Створення екземпляру класу Users для роботи з користувачами

# Маршрут для отримання всіх користувачів
@app.route("/users")
def get_all_users():
    return users.get_all_users()

# Маршрут для отримання користувача за його ідентифікатором
@app.route("/user/<id>")
def get_user_by_id(id):
    return users.get_user_by_id(id)

# Маршрут для отримання користувача за його логіном
@app.route("/user/login/<Login>")
def get_user_by_Login(Login):
    return users.get_user_by_Login(Login)

# Маршрут для додавання нового користувача
@app.route("/user/add", methods=["POST"])
def add_user():
    return users.add_user(request.form)

# Маршрут для оновлення інформації про користувача
@app.route("/user/update", methods=["PUT"])
def update_user():
    return users.update_user(request.form)

# Маршрут для видалення користувача за його ідентифікатором
@app.route("/user/delete/<id>", methods=["DELETE"])
def delete_user(id):
    return users.delete_user(id)


```

### Users Model

```py
import json  # Імпорт модуля для роботи з JSON
import mysql.connector  # Імпорт модуля для роботи з MySQL
import base64  # Імпорт модуля для роботи з кодуванням base64

class Users:
    def __init__(self):
        try:
            # Підключення до бази даних MySQL
            self.con = mysql.connector.connect(host="localhost", user="root", password="db12345!", database='project_db')
            self.cur = self.con.cursor(dictionary=True)  # Створення курсора для роботи з даними у вигляді словника
            self.con.autocommit = True  # Встановлення автоматичного підтвердження для автоматичного збереження змін
            print("succesful connection")  # Виведення повідомлення про успішне з'єднання
        except:
            print("failed")  # Виведення повідомлення про невдале з'єднання

    # Отримання всіх користувачів
    def get_all_users(self):
        self.cur.execute("SELECT * FROM users")  # Виконання запиту для вибору всіх користувачів
        result = self.cur.fetchall()  # Отримання результату запиту

        # Перевірка наявності користувачів
        if(self.cur.rowcount > 0):
            # Кодування зображення та паролю користувачів у base64
            for i in range(len(result)):
                result[i]["Picture"] = str(base64.b64encode(result[i]["Picture"]))
                result[i]["Password"] = str(base64.b64encode(result[i]["Password"]))
        else:
            result = {"message": "There is no users", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність користувачів
        
        return result  # Повернення результату

    # Отримання користувача за його ідентифікатором
    def get_user_by_id(self, id):
        if (not str(id).isdigit()):  # Перевірка на правильність формату ідентифікатора
            return {"message": "Invalid user id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор
        self.cur.execute(f"SELECT * FROM users where id={id}")  # Виконання запиту для вибору користувача за його ідентифікатором
        result = self.cur.fetchall()  # Отримання результату запиту

        # Перевірка наявності користувача
        if(self.cur.rowcount > 0):
            # Кодування зображення та паролю користувача у base64
            for i in range(len(result)):
                result[i]["Picture"] = str(base64.b64encode(result[i]["Picture"]))
                result[i]["Password"] = str(base64.b64encode(result[i]["Password"]))
        else:
            result = {"message": "There is no user with such id", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність користувача
    
        return result  # Повернення результату

    # Отримання користувача за його логіном
    def get_user_by_Login(self, Login):
        self.cur.execute(f"SELECT * FROM users WHERE Login='{Login}'")  # Виконання запиту для вибору користувача за його логіном
        result = self.cur.fetchall()  # Отримання результату запиту

        # Перевірка наявності користувача
        if(self.cur.rowcount > 0):
            # Кодування зображення та паролю користувача у base64
            for i in range(len(result)):
                result[i]["Picture"] = str(base64.b64encode(result[i]["Picture"]))
                result[i]["Password"] = str(base64.b64encode(result[i]["Password"]))
        else:
            result = {"message": "There is no user with such Login", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність користувача
        
        return result  # Повернення результату

    # Додавання нового користувача
    def add_user(self, data):
        data = dict(data)
        return_value = ""
        if (len(data) == 5):
            self.cur.execute("SELECT Name FROM roles")  # Виконання запиту для отримання всіх ролей
            result = self.cur.fetchall()  # Отримання результату запиту
            IsRoleValid = False

            # Перевірка чи існує вказана роль
            for i in range(len(result)):
                if(result[i]["Name"] == data["Role"]):
                    IsRoleValid = True
                    break

            if (not IsRoleValid):
                return_value = {"message": "Invalid Role", "error": "Not Found", "status code": 404}  # Створення повідомлення про невірну роль
            else:
                self.cur.execute(f"SELECT Id FROM roles WHERE Name='{data["Role"]}'")
                RoleId = self.cur.fetchall()
                RoleId = int(RoleId[0]["Id"])

                try:
                    # Додавання нового користувача у базу даних
                    self.cur.execute(f"INSERT INTO users (Login, Picture, Password, Email, Role) values('{data["Login"]}', '{data["Picture"]}', '{data["Password"]}', '{data["Email"]}', '{data["Role"]}')")
                    self.cur.execute(f"SELECT Id FROM users WHERE Email='{data["Email"]}'")
                    user_id = self.cur.fetchall()
                    user_id = int(user_id[0]["Id"])
                    self.cur.execute(f"INSERT INTO members (RoleId, UserId) values ({RoleId},{user_id})")
                    return_value = {"message": "Successfully added to database", "status code": 200}  # Створення повідомлення про успішне додавання користувача
                except:
                    return_value = {"message": "There is already user with such email or login", "error": "Conflict", "status code": 409}  # Створення повідомлення про вже існуючого користувача з такою електронною поштою або логіном
        else:
            return_value = {"message": "Invalid amount of keys", "error": "Bad Request", "status code": 400}  # Створення повідомлення про неправильну кількість ключів

        return return_value  # Повернення результату

    # Оновлення інформації про користувача
    def update_user(self, data):
        if(len(dict(data)) != 6):
            return {"message": "Invalid amount of keys", "error": "Bad Request", "status code": 400}  # Створення повідомлення про неправильну кількість ключів

        if(not str(dict(data)["Id"]).isdigit()):
            return {"message": "Invalid user id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор користувача
        self.cur.execute(f"SELECT Name FROM roles")  # Виконання запиту для отримання всіх ролей
        all_roles = self.cur.fetchall()  # Отримання результату запиту
        result = "Invalid data"
        data = dict(data)

        IsValidRole = False

        # Перевірка чи існує вказана роль
        for i in range(len(all_roles)):
            if(all_roles[i]["Name"] == data["Role"]):
                IsValidRole = True
                break
        
        if (IsValidRole):
            self.cur.execute(f"SELECT Id FROM roles WHERE Name='{data["Role"]}'")
            id_of_Role = self.cur.fetchall()
            id_of_Role = int(id_of_Role[0]["Id"])
            try:
                self.cur.execute(f"UPDATE members SET RoleId={id_of_Role}")  # Оновлення ролі користувача
                self.cur.execute(f"UPDATE users SET Login='{data["Login"]}', Picture='{data["Picture"]}', Password='{data["Password"]}', Email='{data["Email"]}', Role='{data["Role"]}' WHERE Id={data["Id"]}")  # Оновлення даних користувача

                if (self.cur.rowcount == 0):
                    result = {"message": "Nothing to update", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність користувача для оновлення
                else:
                    result = {"message": "Updated successfully", "status code": 200}  # Створення повідомлення про успішне оновлення даних користувача
            except:
                result = {"message": "There is already user with such email or login", "error": "Conflict", "status code": 409}  # Створення повідомлення про вже існуючого користувача з такою електронною поштою або логіном
        else:
            result = {"message": "Invalid Role", "error": "Not Found", "status code": 404}  # Створення повідомлення про невірну роль

        return result  # Повернення результату

    # Видалення користувача за його ідентифікатором
    def delete_user(self, id):

        if(not str(id).isdigit()):  # Перевірка на правильність формату ідентифікатора
            return {"message": "Invalid user id", "error": "Bad Request", "status code": 400}  # Створення повідомлення про невірний ідентифікатор користувача
    
        self.cur.execute(f"SELECT Id FROM members WHERE UserId={id}")  # Виконання запиту для отримання ідентифікатора користувача
        result = self.cur.fetchall()  # Отримання результату запиту

        if(len(result) != 0):
            member_id = int(result[0]["Id"])
            self.cur.execute(f"DELETE FROM projects_members WHERE MemberId={member_id}")  # Видалення користувача з участі в проектах

        self.cur.execute(f"DELETE FROM members WHERE UserId={id}")  # Видалення користувача з таблиці учасників
        self.cur.execute(f"DELETE FROM users WHERE Id={id}")  # Видалення користувача з таблиці користувачів
        
        if(self.cur.rowcount == 0 ):
            result = {"message": "Nothing to delete", "error": "Not Found", "status code": 404}  # Створення повідомлення про відсутність користувача для видалення
        else:
            result = {"message": "User was successfully deleted", "status code": 204}  # Створення повідомлення про успішне видалення користувача

        return result  # Повернення результату

```
